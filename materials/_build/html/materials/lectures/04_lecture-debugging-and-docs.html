
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lecture 4: Code coverage &amp; package dependencies &#8212; DSCI 310 Reproducible and Trustworthy Workflows for Data Science</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/dsci-310-logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">DSCI 310 Reproducible and Trustworthy Workflows for Data Science</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../README.html">
   Reproducible and Trustworthy Workflows for Data Science
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Course notes
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="01-intro-to-ds-workflows.html">
   How do reproducible and trustworthy workflows impact data science?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02-version-control-1.html">
   Version control for transparency and collaboration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03-filenames-project-organization.html">
   Filenames and data science project organization, Integrated development environments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04-virtual-environments.html">
   Virtual environments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05-containerization.html">
   Managing dependencies using containerization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="06-intro-to-testing-code.html">
   Introduction to testing code for data science
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="07-scripts-and-pipelines.html">
   Non-interactive scripts and data analysis pipelines
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="08-reproducible-reports.html">
   Reproducible reports
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="09-packaging-and-documenting.html">
   Packaging and documenting code
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="10-continuous-integration.html">
   Automated testing and continuous integration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="11-deploy-and-publish.html">
   Deploying and publishing packages
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="12-licenses-and-copyright.html">
   Copyright and licenses
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/materials/lectures/04_lecture-debugging-and-docs.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/UBC-DSCI/reproducible-and-trustworthy-workflows-for-data-science"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/UBC-DSCI/reproducible-and-trustworthy-workflows-for-data-science/issues/new?title=Issue%20on%20page%20%2Fmaterials/lectures/04_lecture-debugging-and-docs.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/UBC-DSCI/reproducible-and-trustworthy-workflows-for-data-science/master?urlpath=tree/materials/lectures/04_lecture-debugging-and-docs.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#learning-objectives">
   Learning objectives:
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#coverage">
   Coverage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#coverage-metrics">
     Coverage metrics:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-exactly-is-a-branch">
     What exactly is a branch?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-are-line-and-branch-coverage-different">
   How are line and branch coverage different?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-branch-as-the-coverage-metric">
     Using branch as the coverage metric:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-line-as-the-coverage-metric">
     Using line as the coverage metric:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#but-wait-line-coverage-can-be-misleading">
     But wait, line coverage can be misleading‚Ä¶
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       Using branch as the coverage metric:
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       Using line as the coverage metric:
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#take-home-message">
     Take home message:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#calculating-coverage-in-python">
     Calculating coverage in Python
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     Calculating coverage in Python
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-calculate-coverage-in-python">
     Exercise: Calculate coverage in Python
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#steps">
       Steps:
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-does-coverage-in-python-actually-count-line-coverage">
     How does
     <code class="docutils literal notranslate">
      <span class="pre">
       coverage
      </span>
     </code>
     in Python actually count line coverage?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-does-coverage-in-python-actually-branch-coverage">
     How does
     <code class="docutils literal notranslate">
      <span class="pre">
       coverage
      </span>
     </code>
     in Python actually branch coverage?
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#want-more-details-on-the-execution-of-coverage">
       Want more details on the execution of Coverage?
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#coverage-reports">
     Coverage reports
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-improve-branch-coverage">
     Exercise: Improve branch coverage
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id4">
       Steps:
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#calculating-coverage-in-r">
   Calculating coverage in R
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dealing-with-other-package-dependencies-in-your-package">
   Dealing with other package dependencies in your package
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dealing-with-package-dependencies-in-r">
     Dealing with package dependencies in R
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-pipe-a-special-dependency">
     The pipe,
     <code class="docutils literal notranslate">
      <span class="pre">
       %&gt;%
      </span>
     </code>
     , a special dependency
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dealing-with-package-dependencies-in-python">
     Dealing with package dependencies in Python
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-does-poetry-install-use-pyproject-toml-poetry-lock">
     How does Poetry
     <code class="docutils literal notranslate">
      <span class="pre">
       install
      </span>
     </code>
     use
     <code class="docutils literal notranslate">
      <span class="pre">
       pyproject.toml
      </span>
     </code>
     &amp;
     <code class="docutils literal notranslate">
      <span class="pre">
       poetry.lock
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#where-are-we-headed-next">
   Where are we headed next?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#extra-materials">
   Extra materials
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#helper-internal-functions-in-r">
     Helper/internal functions in R
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="lecture-4-code-coverage-package-dependencies">
<h1>Lecture 4: Code coverage &amp; package dependencies<a class="headerlink" href="#lecture-4-code-coverage-package-dependencies" title="Permalink to this headline">¬∂</a></h1>
<div class="section" id="learning-objectives">
<h2>Learning objectives:<a class="headerlink" href="#learning-objectives" title="Permalink to this headline">¬∂</a></h2>
<p>By the end of this lecture, students should be able to:</p>
<ul class="simple">
<li><p>Define code, test and branch coverage, and explain why high coverage in each of these metrics is desired.</p></li>
<li><p>Calculate code coverage in R and Python</p></li>
<li><p>Manage package dependencies in R and Python packages</p></li>
</ul>
</div>
<div class="section" id="coverage">
<h2>Coverage<a class="headerlink" href="#coverage" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Definition:</strong> Proportion of system being executed by the test suite.</p>
<ul class="simple">
<li><p>usually reported as a percentage: $<span class="math notranslate nohighlight">\(Coverage = \frac{covered}{(covered + uncovered)} * 100\)</span>$</p></li>
</ul>
<div class="section" id="coverage-metrics">
<h3>Coverage metrics:<a class="headerlink" href="#coverage-metrics" title="Permalink to this headline">¬∂</a></h3>
<p>There are many, but here are the ones our automated tools in this course will calculate for you:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Metric</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Dependent upon control flow</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>line</p></td>
<td><p>lines of code that tests execute</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>branch</p></td>
<td><p>number of branches (independent code segments) that tests execute</p></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="what-exactly-is-a-branch">
<h3>What exactly is a branch?<a class="headerlink" href="#what-exactly-is-a-branch" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="c1"># Branch 1</span>
    <span class="k">if</span> <span class="n">condition_met</span><span class="p">:</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">function_a</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">function_b</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="c1"># Branch 2</span>
    <span class="k">else</span><span class="p">:</span> 
        <span class="n">y</span> <span class="o">=</span> <span class="n">function_b</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">function_c</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">z</span>
</pre></div>
</div>
<p><em>Adapted from: <a class="reference external" href="http://www.ncover.com/blog/code-coverage-metrics-branch-coverage/">http://www.ncover.com/blog/code-coverage-metrics-branch-coverage/</a></em></p>
</div>
</div>
<div class="section" id="how-are-line-and-branch-coverage-different">
<h2>How are line and branch coverage different?<a class="headerlink" href="#how-are-line-and-branch-coverage-different" title="Permalink to this headline">¬∂</a></h2>
<p>Consider the same example we just saw and the unit test below, let‚Äôs manually calculate the coverage using line and branch coverage metrics:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="c1"># Branch 1</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="s2">&quot;pony&quot;</span><span class="p">:</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">function_a</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">function_b</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="c1"># Branch 2</span>
    <span class="k">else</span><span class="p">:</span> 
        <span class="n">y</span> <span class="o">=</span> <span class="n">function_c</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">function_d</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">function_e</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">z</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_my_function</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">my_function</span><span class="p">(</span><span class="s2">&quot;pony&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="s2">&quot;Actually a unicorn&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Note: function definitions are not counted as lines when calculating coverage</em></p>
<div class="section" id="using-branch-as-the-coverage-metric">
<h3>Using branch as the coverage metric:<a class="headerlink" href="#using-branch-as-the-coverage-metric" title="Permalink to this headline">¬∂</a></h3>
<p><span class="math notranslate nohighlight">\(Coverage = \frac{covered}{(covered + uncovered)} * 100\)</span></p>
<p><span class="math notranslate nohighlight">\(Coverage = \frac{1}{(1 + 1)} * 100\)</span></p>
<p><span class="math notranslate nohighlight">\(Coverage = 50\%\)</span></p>
</div>
<div class="section" id="using-line-as-the-coverage-metric">
<h3>Using line as the coverage metric:<a class="headerlink" href="#using-line-as-the-coverage-metric" title="Permalink to this headline">¬∂</a></h3>
<p><span class="math notranslate nohighlight">\(Coverage = \frac{covered}{(covered + uncovered)} * 100\)</span></p>
<p><span class="math notranslate nohighlight">\(Coverage = \frac{4}{(4 + 4)} * 100\)</span></p>
<p><span class="math notranslate nohighlight">\(Coverage = 50\%\)</span></p>
</div>
<div class="section" id="but-wait-line-coverage-can-be-misleading">
<h3>But wait, line coverage can be misleading‚Ä¶<a class="headerlink" href="#but-wait-line-coverage-can-be-misleading" title="Permalink to this headline">¬∂</a></h3>
<p>Let‚Äôs alter our function and re-calculate line and branch coverage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="c1"># Branch 1</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="s2">&quot;pony&quot;</span><span class="p">:</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">function_a</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">function_b</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;some important message&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;another important message&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;a less important message&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;just makin&#39; stuff up here...&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;out of things to say...&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;how creative can I be...&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I guess not very...&quot;</span><span class="p">)</span>
    <span class="c1"># Branch 2</span>
    <span class="k">else</span><span class="p">:</span> 
        <span class="n">y</span> <span class="o">=</span> <span class="n">function_c</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">function_d</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">function_e</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">z</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_my_function</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">my_function</span><span class="p">(</span><span class="s2">&quot;pony&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="s2">&quot;Actually a unicorn&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="id1">
<h4>Using branch as the coverage metric:<a class="headerlink" href="#id1" title="Permalink to this headline">¬∂</a></h4>
<p><span class="math notranslate nohighlight">\(Coverage = \frac{covered}{(covered + uncovered)} * 100\)</span></p>
<p><span class="math notranslate nohighlight">\(Coverage = \frac{1}{(1 + 1)} * 100\)</span></p>
<p><span class="math notranslate nohighlight">\(Coverage = 50\%\)</span></p>
</div>
<div class="section" id="id2">
<h4>Using line as the coverage metric:<a class="headerlink" href="#id2" title="Permalink to this headline">¬∂</a></h4>
<p><span class="math notranslate nohighlight">\(Coverage = \frac{covered}{(covered + uncovered)} * 100\)</span></p>
<p><span class="math notranslate nohighlight">\(Coverage = \frac{12}{(12 + 4)} * 100\)</span></p>
<p><span class="math notranslate nohighlight">\(Coverage = 75\%\)</span></p>
<p>ü§Ø</p>
</div>
</div>
<div class="section" id="take-home-message">
<h3>Take home message:<a class="headerlink" href="#take-home-message" title="Permalink to this headline">¬∂</a></h3>
<p>Use branch coverage when you can, especially if your code uses control flow!</p>
</div>
<div class="section" id="calculating-coverage-in-python">
<h3>Calculating coverage in Python<a class="headerlink" href="#calculating-coverage-in-python" title="Permalink to this headline">¬∂</a></h3>
<p>We use the plugin  tool <a class="reference external" href="https://github.com/pytest-dev/pytest-cov"><code class="docutils literal notranslate"><span class="pre">pytest-cov</span></code></a> to do this.</p>
<p>Install as a package dependency via poetry:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poetry</span> <span class="n">add</span> <span class="o">--</span><span class="n">dev</span> <span class="n">pytest</span><span class="o">-</span><span class="n">cov</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>Calculating coverage in Python<a class="headerlink" href="#id3" title="Permalink to this headline">¬∂</a></h3>
<p>To calculate line coverage and print it to the terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poetry</span> <span class="n">run</span> <span class="n">pytest</span> <span class="o">--</span><span class="n">cov</span><span class="o">=&lt;</span><span class="n">project_slug</span><span class="o">&gt;</span> 
</pre></div>
</div>
<p>To calculate line coverage and print it to the terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poetry</span> <span class="n">run</span> <span class="n">pytest</span> <span class="o">--</span><span class="n">cov</span><span class="o">-</span><span class="n">branch</span> <span class="o">--</span><span class="n">cov</span><span class="o">=&lt;</span><span class="n">project_slug</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Next week we will learn to use GitHub actions to link this to <a class="reference external" href="https://codecov.io/">codecov.io</a> to get a shiny button ‚ú® that advertises your code coverage!</p>
</div>
<div class="section" id="exercise-calculate-coverage-in-python">
<h3>Exercise: Calculate coverage in Python<a class="headerlink" href="#exercise-calculate-coverage-in-python" title="Permalink to this headline">¬∂</a></h3>
<p>Let‚Äôs practice calculating coverage in Python!</p>
<div class="section" id="steps">
<h4>Steps:<a class="headerlink" href="#steps" title="Permalink to this headline">¬∂</a></h4>
<ol class="simple">
<li><p>Fork &amp; clone this GitHub repository: <a class="reference external" href="https://github.com/ttimbers/big_abs">https://github.com/ttimbers/big_abs</a></p></li>
<li><p>Using a command line, navigate to the root of this repository and run <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">install</span></code></p></li>
<li><p>Calculate the line coverage and print it to the terminal via <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">run</span> <span class="pre">pytest</span> <span class="pre">--cov=big_abs</span></code></p></li>
<li><p>Calculate the branch coverage and print it to the terminal via <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">run</span> <span class="pre">pytest</span> <span class="pre">--cov-branch</span> <span class="pre">--cov=big_abs</span></code></p></li>
</ol>
</div>
</div>
<div class="section" id="how-does-coverage-in-python-actually-count-line-coverage">
<h3>How does <code class="docutils literal notranslate"><span class="pre">coverage</span></code> in Python actually count line coverage?<a class="headerlink" href="#how-does-coverage-in-python-actually-count-line-coverage" title="Permalink to this headline">¬∂</a></h3>
<ul class="simple">
<li><p>the output from <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">run</span> <span class="pre">pytest</span> <span class="pre">--cov=big_abs</span></code> gives a table that looks like this:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">----------</span> <span class="n">coverage</span><span class="p">:</span> <span class="n">platform</span> <span class="n">darwin</span><span class="p">,</span> <span class="n">python</span> <span class="mf">3.7.6</span><span class="o">-</span><span class="n">final</span><span class="o">-</span><span class="mi">0</span> <span class="o">-----------</span>
<span class="n">Name</span>                  <span class="n">Stmts</span>   <span class="n">Miss</span>  <span class="n">Cover</span>
<span class="o">-----------------------------------------</span>
<span class="n">big_abs</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>       <span class="mi">1</span>      <span class="mi">0</span>   <span class="mi">100</span><span class="o">%</span>
<span class="n">big_abs</span><span class="o">/</span><span class="n">big_abs</span><span class="o">.</span><span class="n">py</span>        <span class="mi">8</span>      <span class="mi">2</span>    <span class="mi">75</span><span class="o">%</span>
<span class="o">-----------------------------------------</span>
<span class="n">TOTAL</span>                     <span class="mi">9</span>      <span class="mi">2</span>    <span class="mi">78</span><span class="o">%</span>
</pre></div>
</div>
<p>In the column labelled as ‚ÄúStmts‚Äù, coverage is calculating all possible line jumps that could have been executed (these line jumps are sometimes called arcs).</p>
<blockquote>
<div><p>Note - this leads coverage to count two statements on one line that are separated by a ‚Äú;‚Äù (e.g., print(‚Äúhello‚Äù); print(‚Äúthere‚Äù)) as one statement, as well as calculating a single statement that is spread across two lines as one statement.</p>
</div></blockquote>
<p>In the column labelled as ‚ÄúMiss‚Äù, this is the number of line jumps not executed by the tests.</p>
<p>The coverage percentage in this scenario is calculated by:
$<span class="math notranslate nohighlight">\(Coverage = \frac{(Stmts - Miss)}{Stmts}\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\(Coverage = \frac{8 - 2}{8} * 100 = 75\%\)</span>$</p>
</div>
<div class="section" id="how-does-coverage-in-python-actually-branch-coverage">
<h3>How does <code class="docutils literal notranslate"><span class="pre">coverage</span></code> in Python actually branch coverage?<a class="headerlink" href="#how-does-coverage-in-python-actually-branch-coverage" title="Permalink to this headline">¬∂</a></h3>
<ul class="simple">
<li><p>the output from <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">run</span> <span class="pre">pytest</span> <span class="pre">--cov-branch</span> <span class="pre">--cov=big_abs</span></code> gives a table that looks like this:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">----------</span> <span class="n">coverage</span><span class="p">:</span> <span class="n">platform</span> <span class="n">darwin</span><span class="p">,</span> <span class="n">python</span> <span class="mf">3.7.6</span><span class="o">-</span><span class="n">final</span><span class="o">-</span><span class="mi">0</span> <span class="o">-----------</span>
<span class="n">Name</span>                  <span class="n">Stmts</span>   <span class="n">Miss</span> <span class="n">Branch</span> <span class="n">BrPart</span>  <span class="n">Cover</span>
<span class="o">-------------------------------------------------------</span>
<span class="n">big_abs</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>       <span class="mi">1</span>      <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span>   <span class="mi">100</span><span class="o">%</span>
<span class="n">big_abs</span><span class="o">/</span><span class="n">big_abs</span><span class="o">.</span><span class="n">py</span>        <span class="mi">8</span>      <span class="mi">2</span>      <span class="mi">6</span>      <span class="mi">3</span>    <span class="mi">64</span><span class="o">%</span>
<span class="o">-------------------------------------------------------</span>
<span class="n">TOTAL</span>                     <span class="mi">9</span>      <span class="mi">2</span>      <span class="mi">6</span>      <span class="mi">3</span>    <span class="mi">67</span><span class="o">%</span>
</pre></div>
</div>
<p>In the column labelled as ‚ÄúBranch‚Äù, coverage is actually counting the number of possible jumps from branch points.</p>
<blockquote>
<div><p>Note: because coverage is using line jumps to count branches, each <code class="docutils literal notranslate"><span class="pre">if</span></code> inherently has an <code class="docutils literal notranslate"><span class="pre">else</span></code> even if its not explicitly written in the code.</p>
</div></blockquote>
<p>In the column labelled as ‚ÄúBrPart‚Äù, this is the number of of possible jumps from branch points executed by the tests.</p>
<p>The branch coverage percentage in this tool is calculated by:</p>
<div class="math notranslate nohighlight">
\[Coverage = \frac{(Stmts\:executed + BrPart)}{(Stmts + Branch)}\]</div>
<div class="math notranslate nohighlight">
\[Coverage = \frac{((Stmts - Miss) + BrPart)}{(Stmts + Branch)}\]</div>
<p>So for <code class="docutils literal notranslate"><span class="pre">big_abs/big_abs.py</span></code> 64% was calculated from:
$<span class="math notranslate nohighlight">\(Coverage = \frac{((8 - 2) + 3)}{(8 + 6)} * 100 = 64\%\)</span>$</p>
<div class="section" id="want-more-details-on-the-execution-of-coverage">
<h4>Want more details on the execution of Coverage?<a class="headerlink" href="#want-more-details-on-the-execution-of-coverage" title="Permalink to this headline">¬∂</a></h4>
<p><strong>Documentation</strong></p>
<p>https://coverage.readthedocs.io/en/coverage-4.0.3/howitworks.html#execution</p>
<p><strong>Source code:</strong></p>
<p>https://github.com/nedbat/coveragepy/blob/4ce893437c9e777216cac981c5909572fa10d9df/coverage/results.py#L240</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">ratio_covered</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a numerator and denominator for the coverage ratio.&quot;&quot;&quot;</span>
        <span class="n">numerator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_executed</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_executed_branches</span>
        <span class="n">denominator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_statements</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_branches</span>
        <span class="k">return</span> <span class="n">numerator</span><span class="p">,</span> <span class="n">denominator</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="coverage-reports">
<h3>Coverage reports<a class="headerlink" href="#coverage-reports" title="Permalink to this headline">¬∂</a></h3>
<p>There is a very cool html report you can generate that will give you some more information about what lines and branches have been executed or not for each file. You can generate it via <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">run</span> <span class="pre">pytest</span> <span class="pre">--cov-branch</span> <span class="pre">--cov=big_abs</span> <span class="pre">--cov-report</span> <span class="pre">html</span></code> and you will get a folder called <code class="docutils literal notranslate"><span class="pre">htmlcov</span></code> in the root directory of your project.</p>
<p>From there you will see a table like we generated in the terminal, but you can click on the file to see more info that looks like this:</p>
<div class="figure align-default" id="covr-html">
<a class="reference internal image-reference" href="materials/lectures/img/covr_html.png"><img alt="materials/lectures/img/covr_html.png" src="materials/lectures/img/covr_html.png" style="width: 500px;" /></a>
</div>
</div>
<div class="section" id="exercise-improve-branch-coverage">
<h3>Exercise: Improve branch coverage<a class="headerlink" href="#exercise-improve-branch-coverage" title="Permalink to this headline">¬∂</a></h3>
<p>Let‚Äôs add some additional test cases to improve the branch coverage for the <code class="docutils literal notranslate"><span class="pre">big_abs</span></code> Python package!</p>
<div class="section" id="id4">
<h4>Steps:<a class="headerlink" href="#id4" title="Permalink to this headline">¬∂</a></h4>
<ol class="simple">
<li><p>Open <code class="docutils literal notranslate"><span class="pre">big_abs/big_abs.py</span></code> and <code class="docutils literal notranslate"><span class="pre">tests/test_big_abs.py</span></code> and identify the branch(es) that the current test case covers</p></li>
<li><p>Add at least one new test case that will improve branch coverage. Prove this to yourself by calculating the branch coverage and print it to the terminal via <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">run</span> <span class="pre">pytest</span> <span class="pre">--cov-branch</span> <span class="pre">--cov=big_abs</span></code></p></li>
</ol>
</div>
</div>
</div>
<div class="section" id="calculating-coverage-in-r">
<h2>Calculating coverage in R<a class="headerlink" href="#calculating-coverage-in-r" title="Permalink to this headline">¬∂</a></h2>
<p>We use the <a class="reference external" href="https://covr.r-lib.org/"><code class="docutils literal notranslate"><span class="pre">covr</span></code></a> R package to do this.</p>
<p>Install via R console:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">install</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="s2">&quot;covr&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To calculate line coverage and have it show in the viewer pane in RStudio:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">covr</span><span class="p">::</span><span class="n">report</span><span class="p">()</span>
</pre></div>
</div>
<p>Currently <code class="docutils literal notranslate"><span class="pre">covr</span></code> does not have the functionality to calculate branch coverage. Thus this is up to you in R to calculate this by hand if you really want to know.</p>
<blockquote>
<div><p>Why has this not been implemented? It has been in an now unsupported package (see <a class="reference external" href="https://github.com/MangoTheCat/testCoverage">here</a>), but its implementation was too complicated for others to understand. Automating the calculation of branch coverage is non-trivial, and this is a perfect demonstration of that.</p>
</div></blockquote>
</div>
<div class="section" id="dealing-with-other-package-dependencies-in-your-package">
<h2>Dealing with other package dependencies in your package<a class="headerlink" href="#dealing-with-other-package-dependencies-in-your-package" title="Permalink to this headline">¬∂</a></h2>
<div class="section" id="dealing-with-package-dependencies-in-r">
<h3>Dealing with package dependencies in R<a class="headerlink" href="#dealing-with-package-dependencies-in-r" title="Permalink to this headline">¬∂</a></h3>
<ul class="simple">
<li><p>When we write code in our package that uses functions from other packages we need to import those functions from the namespace of their packages.</p></li>
<li><p>In R, we do this via <code class="docutils literal notranslate"><span class="pre">use_package</span></code>, which adds that package to the ‚ÄúImports‚Äù section of DESCRIPTION</p></li>
<li><p>We also need to refer to that package in our function code, there are two ways to do this:</p>
<ol class="simple">
<li><p>refer the function by <code class="docutils literal notranslate"><span class="pre">package::fun_name</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">dplyer::filter</span></code>) whenever you use the function in your code</p></li>
<li><p>add the function to your packages namespace so that you can just refer to it as your normally would. To do this add <code class="docutils literal notranslate"><span class="pre">&#64;importFrom</span> <span class="pre">&lt;package_name&gt;</span> <span class="pre">&lt;function_or_operator&gt;</span></code> to the Roxygen documentation of the function that you would like to use the function from the other package in and then use <code class="docutils literal notranslate"><span class="pre">document()</span></code> to update the DESCRIPTION and NAMESPACE file.</p></li>
</ol>
</li>
</ul>
<p><em>It is recommended to use method 1 (<code class="docutils literal notranslate"><span class="pre">pkg::fun_name</span></code>) because it is more explicit on what external functions your package code depends on (making it easier to read for collaborators, including future you). The trade off is that it‚Äôs a little more work to write.</em></p>
</div>
<div class="section" id="the-pipe-a-special-dependency">
<h3>The pipe, <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code>, a special dependency<a class="headerlink" href="#the-pipe-a-special-dependency" title="Permalink to this headline">¬∂</a></h3>
<ul class="simple">
<li><p>Given the ubiquity of the pipe operator, <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code>, in R, there is a function that automates exposing to your entire package: <code class="docutils literal notranslate"><span class="pre">usethis::use_pipe()</span></code></p></li>
<li><p>Note, in general, the tidyverse team does not recommend using the pipe in packages unless they are personal, low use packages, or ‚Äúpro‚Äù packages with a lot of data wrangling because:</p>
<ul>
<li><p>In most cases it is really an unnecessary dependency</p></li>
<li><p>It is not that readable for folks who do not typically use the pipe</p></li>
<li><p>makes debugging more challenging</p></li>
</ul>
</li>
</ul>
<p>So, should you use the pipe in your package? The answer is, it depends on your package‚Äôs scope, aims and goals. Also, this is probably your first package, so it doesn‚Äôt have to be perfect. If using the pipe helps you get the job done this time around, go for it. Just know that if you aim to ever build a widely used package, you probably do not want to depend on it.</p>
</div>
<div class="section" id="dealing-with-package-dependencies-in-python">
<h3>Dealing with package dependencies in Python<a class="headerlink" href="#dealing-with-package-dependencies-in-python" title="Permalink to this headline">¬∂</a></h3>
<ul>
<li><p>Given that we are using Poetry to manage our Python packages, we can take advantage of Poetry to manage our package dependencies.</p></li>
<li><p>To add a package dependency (one that our package functions depend on), we use <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">add</span> <span class="pre">&lt;package_name&gt;</span></code>.</p></li>
<li><p>When we do this Poetry adds this depenedency to the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file under the <code class="docutils literal notranslate"><span class="pre">[tool.poetry.dependencies]</span></code> table as well as to the <code class="docutils literal notranslate"><span class="pre">poetry.lock</span></code> file.</p></li>
<li><p>Then we need to import these dependencies in our <code class="docutils literal notranslate"><span class="pre">.py</span></code> files where our functions live. Given that <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP 08</a> states that: <em>‚ÄúImports are always put at the top of the file, just after any module comments and docstrings, and before module globals and constants.‚Äù</em> we typically do this at the very top of the file, even when we are writing code that will end up in a package.</p>
<blockquote>
<div><p>It is possible to import packages inside a function, and there is sound reasoning in doing so to make your code more readable, however, it goes against convention and so you need to get your whole team to agree to this if you want to do things this way.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="how-does-poetry-install-use-pyproject-toml-poetry-lock">
<h3>How does Poetry <code class="docutils literal notranslate"><span class="pre">install</span></code> use <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">poetry.lock</span></code><a class="headerlink" href="#how-does-poetry-install-use-pyproject-toml-poetry-lock" title="Permalink to this headline">¬∂</a></h3>
<ul class="simple">
<li><p>The install command reads the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file from the current project, resolves the dependencies, and installs them.</p></li>
<li><p>If there is a <code class="docutils literal notranslate"><span class="pre">poetry.lock</span></code> file in the current directory, it will use the exact versions from there instead of resolving them. This ensures that everyone using the library will get the same versions of the dependencies.</p></li>
<li><p>If there is no <code class="docutils literal notranslate"><span class="pre">poetry.lock</span></code> file, Poetry will create one after dependency resolution.</p></li>
</ul>
<p><em>Source: <a class="reference external" href="https://python-poetry.org/docs/cli/#install">Poetry install documentation</a></em></p>
</div>
</div>
<div class="section" id="where-are-we-headed-next">
<h2>Where are we headed next?<a class="headerlink" href="#where-are-we-headed-next" title="Permalink to this headline">¬∂</a></h2>
<ul class="simple">
<li><p>Package bells &amp; whistles! Including</p>
<ul>
<li><p>Continuous integration</p></li>
<li><p>Documentation</p></li>
<li><p>Package versioning</p></li>
<li><p>Package publishing</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="extra-materials">
<h2>Extra materials<a class="headerlink" href="#extra-materials" title="Permalink to this headline">¬∂</a></h2>
<div class="section" id="helper-internal-functions-in-r">
<h3>Helper/internal functions in R<a class="headerlink" href="#helper-internal-functions-in-r" title="Permalink to this headline">¬∂</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://www.r-bloggers.com/internal-functions-in-r-packages/">Helper/internal functions in R</a></p></li>
<li><p><a class="reference external" href="https://github.com/r-lib/covr/issues/301">Testing helper/internal functions in R</a></p></li>
</ul>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./materials/lectures"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Tiffany Timbers<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>