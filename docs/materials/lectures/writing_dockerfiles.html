
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lecture 7 - Writing your own Dockerfile! &#8212; DSCI 310 Reproducible and Trustworthy Workflows for Data Science</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/dsci-310-logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">DSCI 310 Reproducible and Trustworthy Workflows for Data Science</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../README.html">
   Reproducible and Trustworthy Workflows for Data Science
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Course notes
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="03-filenames-project-organization.html">
   Filenames and data science project organization, Integrated development environments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04-virtual-environments.html">
   Virtual environments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05-containerization.html">
   Managing dependencies using containerization
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/materials/lectures/writing_dockerfiles.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/UBC-DSCI/reproducible-and-trustworthy-workflows-for-data-science"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/UBC-DSCI/reproducible-and-trustworthy-workflows-for-data-science/issues/new?title=Issue%20on%20page%20%2Fmaterials/lectures/writing_dockerfiles.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/UBC-DSCI/reproducible-and-trustworthy-workflows-for-data-science/master?urlpath=tree/materials/lectures/writing_dockerfiles.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#learning-objectives">
   Learning Objectives
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-docker-to-run-rstudio">
   Using Docker to run RStudio
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#let-s-do-it">
     Let’s do it!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-1-launch-the-docker-app-for-osx-windows-only">
     Step 1 - launch the Docker app (for OSX &amp; Windows only)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-2-get-tidyverse-image-from-dockerhub">
     Step 2 - get tidyverse image from Dockerhub
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-3-run-the-tidyverse-image-interactively-and-link-it-to-your-computer-s-disk">
     Step 3 - run the tidyverse image interactively and link it to your computer’s disk
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-4-use-the-tidyverse-image-to-make-an-rmd">
     Step 4 - use the tidyverse image to make an
     <code class="docutils literal notranslate">
      <span class="pre">
       .Rmd
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-5-exit-from-the-tidyverse-docker-image">
     Step 5 - exit from the tidyverse docker image
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-re-attach-to-an-exited-container">
     How to re-attach to an exited container
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#debrief-what-did-we-just-do">
       Debrief - what did we just do?
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-docker-to-run-jupyter">
   Using Docker to run Jupyter
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dockerfiles">
   Dockerfiles
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#workflow-for-building-a-dockerfile">
   Workflow for building a Dockerfile
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#demo-workflow-for-creating-a-dockfile-locally">
   Demo workflow for creating a Dockfile locally
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dockerfile-command-summary">
   Dockerfile command summary
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#most-common-ones-you-will-use">
     Most common ones you will use
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#others-you-may-see-and-have-to-encounter">
     Others you may see and have to encounter
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#choosing-a-base-image-for-your-dockerfile">
   Choosing a base image for your Dockerfile
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#good-base-images-to-work-from-for-r-or-python-projects">
   Good base images to work from for R or Python projects!
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dockerfile-faq">
   Dockerfile FAQ:
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#where-does-the-dockerfile-live">
     Where does the Dockerfile live?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-do-i-make-a-docker-image-from-a-dockerfile">
     How do I make a Docker image from a Dockerfile?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-do-i-build-a-docker-image-locally-on-my-laptop">
     How do I build a Docker image locally on my laptop
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-do-i-know-what-commands-to-use-to-install-things-on-linux">
     How do I know what commands to use to install things on Linux?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-s-next">
   What’s next?
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="lecture-7-writing-your-own-dockerfile">
<h1>Lecture 7 - Writing your own Dockerfile!<a class="headerlink" href="#lecture-7-writing-your-own-dockerfile" title="Permalink to this headline">¶</a></h1>
<div class="section" id="learning-objectives">
<h2>Learning Objectives<a class="headerlink" href="#learning-objectives" title="Permalink to this headline">¶</a></h2>
<p>By the end of the lecture, students should be able to:</p>
<ul class="simple">
<li><p>Use Docker to run RStudio and Jupyter</p></li>
<li><p>Write a Dockerfile</p></li>
<li><p>Build a Docker image from a Dockerfile on your laptop</p></li>
<li><p>List good Docker base images for R and Python projects</p></li>
</ul>
</div>
<div class="section" id="using-docker-to-run-rstudio">
<h2>Using Docker to run RStudio<a class="headerlink" href="#using-docker-to-run-rstudio" title="Permalink to this headline">¶</a></h2>
<p>To keep your Data Science team, or even just yourself, organized using the same dependencies to develop code, you can use Docker to run RStudio!</p>
<div class="section" id="let-s-do-it">
<h3>Let’s do it!<a class="headerlink" href="#let-s-do-it" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="step-1-launch-the-docker-app-for-osx-windows-only">
<h3>Step 1 - launch the Docker app (for OSX &amp; Windows only)<a class="headerlink" href="#step-1-launch-the-docker-app-for-osx-windows-only" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Use launchpad/Finder/Start menu/etc to find and launch Docker</p></li>
</ul>
</div>
<div class="section" id="step-2-get-tidyverse-image-from-dockerhub">
<h3>Step 2 - get tidyverse image from Dockerhub<a class="headerlink" href="#step-2-get-tidyverse-image-from-dockerhub" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>open command line (terminal/GitBash)</p></li>
<li><p>type: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">pull</span> <span class="pre">rocker/tidyverse</span></code></p></li>
<li><p>verify that it successfully pulled by typing: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">images</span></code>, you should see something like:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REPOSITORY</span>                <span class="n">TAG</span>                 <span class="n">IMAGE</span> <span class="n">ID</span>            <span class="n">CREATED</span>             <span class="n">SIZE</span>
<span class="n">rocker</span><span class="o">/</span><span class="n">tidyverse</span>          <span class="n">latest</span>              <span class="n">a2cd50729659</span>        <span class="mi">17</span> <span class="n">hours</span> <span class="n">ago</span>        <span class="mf">1.82</span><span class="n">GB</span>
<span class="n">ttimbers</span><span class="o">/</span><span class="n">makefile2graph</span>   <span class="n">latest</span>              <span class="mi">823</span><span class="n">dcba8f792</span>        <span class="mi">13</span> <span class="n">months</span> <span class="n">ago</span>       <span class="mi">469</span><span class="n">MB</span>
</pre></div>
</div>
</div>
<div class="section" id="step-3-run-the-tidyverse-image-interactively-and-link-it-to-your-computer-s-disk">
<h3>Step 3 - run the tidyverse image interactively and link it to your computer’s disk<a class="headerlink" href="#step-3-run-the-tidyverse-image-interactively-and-link-it-to-your-computer-s-disk" title="Permalink to this headline">¶</a></h3>
<p>Note: The absolute path on your laptop should be where you cloned data_analysis_pipeline_eg</p>
<ul class="simple">
<li><p>do this by typing (use the appropriate paths for your computer!):</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">--</span><span class="n">rm</span> <span class="o">-</span><span class="n">p</span> <span class="mi">8787</span><span class="p">:</span><span class="mi">8787</span> <span class="o">-</span><span class="n">e</span> <span class="n">PASSWORD</span><span class="o">=</span><span class="s2">&quot;test&quot;</span> <span class="o">-</span><span class="n">v</span> <span class="o">&lt;</span><span class="n">absolute</span> <span class="n">path</span> <span class="n">on</span> <span class="n">laptop</span><span class="o">&gt;</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">rstudio</span><span class="o">/</span><span class="n">data_analysis_pipeline_eg</span> <span class="n">rocker</span><span class="o">/</span><span class="n">tidyverse</span>
</pre></div>
</div>
<p>Now, to get to the RStudio GUI/interface, you need to open a web browser and go to this URL: http://localhost:8787</p>
<p>If it worked, then you should be at an RStudio Sign In page. To sign in, use the following credentials:</p>
<p><strong>username:</strong> rstudio</p>
<p><strong>password:</strong> test</p>
<p>Now you should be able to use RStudio inside the browser! Try out some R code to test that it works!</p>
<p>Sample R code to try:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>
<span class="n">my_scatplot</span> <span class="o">&lt;-</span> <span class="n">ggplot</span><span class="p">(</span><span class="n">mtcars</span><span class="p">,</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">wt</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">mpg</span><span class="p">))</span> <span class="o">+</span> <span class="n">geom_point</span><span class="p">()</span> <span class="o">+</span> <span class="n">theme_bw</span><span class="p">()</span>
<span class="n">my_scatplot</span> <span class="o">+</span> <span class="n">xlab</span><span class="p">(</span><span class="s1">&#39;Weight (x 1000lbs)&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">ylab</span><span class="p">(</span><span class="s1">&#39;Miles per Gallon&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">geom_smooth</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="step-4-use-the-tidyverse-image-to-make-an-rmd">
<h3>Step 4 - use the tidyverse image to make an <code class="docutils literal notranslate"><span class="pre">.Rmd</span></code><a class="headerlink" href="#step-4-use-the-tidyverse-image-to-make-an-rmd" title="Permalink to this headline">¶</a></h3>
<p>Try making a <code class="docutils literal notranslate"><span class="pre">.Rmd</span></code> and saving it in the <code class="docutils literal notranslate"><span class="pre">data_analysis_pipeline_eg</span></code> <code class="docutils literal notranslate"><span class="pre">src</span></code> directory.</p>
</div>
<div class="section" id="step-5-exit-from-the-tidyverse-docker-image">
<h3>Step 5 - exit from the tidyverse docker image<a class="headerlink" href="#step-5-exit-from-the-tidyverse-docker-image" title="Permalink to this headline">¶</a></h3>
<p>To exit from this tidyverse Docker image, type <code class="docutils literal notranslate"><span class="pre">Control-C</span></code> at the command line/terminal/GitBash where you launched/ran the image from. Alternatively you can close the command line/terminal/GitBash instead. Closing the browser tab/window does not kill/close the instance of the image.</p>
<p><em>note - there are other ways to close/kill Docker images. We will learn these shortly.</em></p>
<p>If you now look in the <code class="docutils literal notranslate"><span class="pre">src</span></code> directory of the data analysis project you should see the <code class="docutils literal notranslate"><span class="pre">.Rmd</span></code> you created there.</p>
</div>
<div class="section" id="how-to-re-attach-to-an-exited-container">
<h3>How to re-attach to an exited container<a class="headerlink" href="#how-to-re-attach-to-an-exited-container" title="Permalink to this headline">¶</a></h3>
<p>There are several ways to do this and it really depends on what precisely you are trying to accomplish. In general, you will need the container ID and/or name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">ps</span> <span class="o">-</span><span class="n">a</span>
</pre></div>
</div>
<p>Then, run the following <code class="docutils literal notranslate"><span class="pre">attach</span></code> command to re-attach the container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">container</span> <span class="n">attach</span> <span class="o">&lt;</span><span class="n">container</span> <span class="nb">id</span> <span class="n">OR</span> <span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="section" id="debrief-what-did-we-just-do">
<h4>Debrief - what did we just do?<a class="headerlink" href="#debrief-what-did-we-just-do" title="Permalink to this headline">¶</a></h4>
<p>Let’s now dig deeper into the commands and tools we just used to become more familiar with Docker! Let’s fill in this table to explain what each part of our Docker commands did:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>command/flag <code class="docutils literal notranslate"><span class="pre">docker</span></code></p></th>
<th class="head"><p>What it does</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-p</span></code></p></td>
<td><p>Connects Container to a port on your machine so that you can run a program through a web browser</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-e</span></code></p></td>
<td><p>Set simple environment variables in the container you’re running. E.g., PASSWORD=”test”</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-v</span> <span class="pre">path1:path2</span></code></p></td>
<td><p>maps path1 locally to path2 in the Docker container</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="using-docker-to-run-jupyter">
<h2>Using Docker to run Jupyter<a class="headerlink" href="#using-docker-to-run-jupyter" title="Permalink to this headline">¶</a></h2>
<p>Steps:</p>
<ol class="simple">
<li><p>Download docker image with Dash + other dependencies:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">pull</span> <span class="pre">jupyter/datascience-notebook</span></code></p></li>
</ul>
</li>
<li><p>Create a new container:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">--rm</span> <span class="pre">-it</span> <span class="pre">-p</span> <span class="pre">8888:8888</span> <span class="pre">-v</span> <span class="pre">/$(pwd):/home/jupyter</span> <span class="pre">jupyter/datascience-notebook</span></code></p></li>
</ul>
</li>
<li><p>Copy the url printed out that looks like the one shown below to your browser:</p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:8888/?token=6e4af655f82dd55d80fd0328d3e61ab32320febfc0b4153c</span></code></p>
<p>That’s it!</p>
<p>When you are done, use Ctrl+C to stop the container from the terminal you launched it from.</p>
</div>
<div class="section" id="dockerfiles">
<h2>Dockerfiles<a class="headerlink" href="#dockerfiles" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> is a plain text file that contains commands primarily about what software to install in the Docker image. This is the more trusted and transparent way to build Docker images.</p></li>
</ul>
<ul class="simple">
<li><p>Once we have created a <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> we can build it into a Docker image.</p></li>
</ul>
<ul class="simple">
<li><p>Docker images are built in layers, and as such, <code class="docutils literal notranslate"><span class="pre">Dockerfiles</span></code> always start by specifiying a base Docker image that the new image is to be built on top off</p></li>
</ul>
<ul class="simple">
<li><p>Docker containers are all Linux containers and thus use Linux commands to install software, however there are different flavours of Linux (e.g., Ubuntu, Debian, CentOs, RedHat, etc) and thus you need to use the right Linux install commands to match your flavour of container. For this course we will focus on Ubuntu- or Debian-based images and thus use <code class="docutils literal notranslate"><span class="pre">apt-get</span></code> as our installation program.</p></li>
</ul>
</div>
<div class="section" id="workflow-for-building-a-dockerfile">
<h2>Workflow for building a Dockerfile<a class="headerlink" href="#workflow-for-building-a-dockerfile" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>Choose a base image to build off (from https://hub.docker.com/)</p></li>
</ol>
<ol class="simple">
<li><p>Create a <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> named <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> and save it in an appropritate project repo. Open that file and type <code class="docutils literal notranslate"><span class="pre">FROM</span> <span class="pre">&lt;BASE_IMAGE&gt;</span> <span class="pre">on</span> <span class="pre">the</span> <span class="pre">first</span> <span class="pre">line</span></code>.</p></li>
</ol>
<ol class="simple">
<li><p>In a terminal, type <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">--rm</span> <span class="pre">-it</span> <span class="pre">&lt;IMAGE_NAME&gt;</span></code> and interactively try the install commands you think will work. Edit and try again until the install command works.</p></li>
</ol>
<ol class="simple">
<li><p>Write working install commands in the <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code>, preceeding them with <code class="docutils literal notranslate"><span class="pre">RUN</span></code> and save the Dockerfile.</p></li>
</ol>
<ol class="simple">
<li><p>After adding every 2-3 commands to your <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code>, try building the Docker image via <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span> <span class="pre">--tag</span> <span class="pre">&lt;TEMP_IMAGE_NAME&gt;</span> <span class="pre">&lt;PATH_TO_DOCKERFILE_DIRECTORY&gt;</span></code></p></li>
</ol>
<ol class="simple">
<li><p>Once the entire Dockerfile works from beginning to end on your laptop, then you can finally move to building remotely (e.g., creating a [trusted build on GitHub Actions]).</p></li>
</ol>
</div>
<div class="section" id="demo-workflow-for-creating-a-dockfile-locally">
<h2>Demo workflow for creating a Dockfile locally<a class="headerlink" href="#demo-workflow-for-creating-a-dockfile-locally" title="Permalink to this headline">¶</a></h2>
<p>We will demo this workflow together to build a Docker image locally on our machines that has R and the <code class="docutils literal notranslate"><span class="pre">cowsay</span></code> R package installed.</p>
<p>Let’s start with the <code class="docutils literal notranslate"><span class="pre">debian:stable</span></code> image, so the first line of our <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> should be as such:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FROM</span> <span class="n">debian</span><span class="p">:</span><span class="n">stable</span>
</pre></div>
</div>
<p>Now let’s run the <code class="docutils literal notranslate"><span class="pre">debian:stable</span></code> image so we can work on our install commands to find some that work!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run --rm -it debian:stable
</pre></div>
</div>
<p>Now that we are in a container instance of the <code class="docutils literal notranslate"><span class="pre">debian:stable</span></code> Docker image, we can start playing around with installing things. To install things in the Debian flavour of Linux we use the command <code class="docutils literal notranslate"><span class="pre">apt-get</span></code>. We will do some demo’s in class today, but a more comprehensive tutorial can be found <a class="reference external" href="https://www.digitalocean.com/community/tutorials/how-to-manage-packages-in-ubuntu-and-debian-with-apt-get-apt-cache">here</a>.</p>
<p>To install R on Debian, we can figure out how to do this by following the CRAN documentation available <a class="reference external" href="https://cran.r-project.org/bin/linux/debian/">here</a>.</p>
<p>First they recommend updating the list of available software package we can install with <code class="docutils literal notranslate"><span class="pre">apt-get</span></code> to us via the <code class="docutils literal notranslate"><span class="pre">apt-get</span> <span class="pre">update</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="o">@</span><span class="mi">5</span><span class="n">d0f4d21a1f9</span><span class="p">:</span><span class="o">/</span><span class="c1"># apt-get update</span>
</pre></div>
</div>
<p>Next, they suggest the following commands to install R:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="o">@</span><span class="mi">5</span><span class="n">d0f4d21a1f9</span><span class="p">:</span><span class="o">/</span><span class="c1"># apt-get install r-base r-base-dev</span>
</pre></div>
</div>
<p>OK, great! That seemed to have worked! Let’s test it by trying out R!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="o">@</span><span class="mi">5</span><span class="n">d0f4d21a1f9</span><span class="p">:</span><span class="o">/</span><span class="c1"># R</span>

<span class="n">R</span> <span class="n">version</span> <span class="mf">3.5.2</span> <span class="p">(</span><span class="mi">2018</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">20</span><span class="p">)</span> <span class="o">--</span> <span class="s2">&quot;Eggshell Igloo&quot;</span>
<span class="n">Copyright</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="mi">2018</span> <span class="n">The</span> <span class="n">R</span> <span class="n">Foundation</span> <span class="k">for</span> <span class="n">Statistical</span> <span class="n">Computing</span>
<span class="n">Platform</span><span class="p">:</span> <span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span> <span class="p">(</span><span class="mi">64</span><span class="o">-</span><span class="n">bit</span><span class="p">)</span>

<span class="n">R</span> <span class="ow">is</span> <span class="n">free</span> <span class="n">software</span> <span class="ow">and</span> <span class="n">comes</span> <span class="k">with</span> <span class="n">ABSOLUTELY</span> <span class="n">NO</span> <span class="n">WARRANTY</span><span class="o">.</span>
<span class="n">You</span> <span class="n">are</span> <span class="n">welcome</span> <span class="n">to</span> <span class="n">redistribute</span> <span class="n">it</span> <span class="n">under</span> <span class="n">certain</span> <span class="n">conditions</span><span class="o">.</span>
<span class="n">Type</span> <span class="s1">&#39;license()&#39;</span> <span class="ow">or</span> <span class="s1">&#39;licence()&#39;</span> <span class="k">for</span> <span class="n">distribution</span> <span class="n">details</span><span class="o">.</span>

<span class="n">R</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">collaborative</span> <span class="n">project</span> <span class="k">with</span> <span class="n">many</span> <span class="n">contributors</span><span class="o">.</span>
<span class="n">Type</span> <span class="s1">&#39;contributors()&#39;</span> <span class="k">for</span> <span class="n">more</span> <span class="n">information</span> <span class="ow">and</span>
<span class="s1">&#39;citation()&#39;</span> <span class="n">on</span> <span class="n">how</span> <span class="n">to</span> <span class="n">cite</span> <span class="n">R</span> <span class="ow">or</span> <span class="n">R</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">publications</span><span class="o">.</span>

<span class="n">Type</span> <span class="s1">&#39;demo()&#39;</span> <span class="k">for</span> <span class="n">some</span> <span class="n">demos</span><span class="p">,</span> <span class="s1">&#39;help()&#39;</span> <span class="k">for</span> <span class="n">on</span><span class="o">-</span><span class="n">line</span> <span class="n">help</span><span class="p">,</span> <span class="ow">or</span>
<span class="s1">&#39;help.start()&#39;</span> <span class="k">for</span> <span class="n">an</span> <span class="n">HTML</span> <span class="n">browser</span> <span class="n">interface</span> <span class="n">to</span> <span class="n">help</span><span class="o">.</span>
<span class="n">Type</span> <span class="s1">&#39;q()&#39;</span> <span class="n">to</span> <span class="n">quit</span> <span class="n">R</span><span class="o">.</span>

<span class="o">&gt;</span> 

</pre></div>
</div>
<p>Awesome! This seemed to have worked! Let’s exit R (via <code class="docutils literal notranslate"><span class="pre">q()</span></code>) and the Docker container (via <code class="docutils literal notranslate"><span class="pre">exit</span></code>). Then we can add these commands to the Dockerfile, proceeding them with <code class="docutils literal notranslate"><span class="pre">RUN</span></code> and try to build our image to ensure this works.</p>
<p>Our <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> so far:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FROM</span> <span class="n">debian</span><span class="p">:</span><span class="n">stable</span>

<span class="n">RUN</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>

<span class="n">RUN</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">r</span><span class="o">-</span><span class="n">base</span> <span class="n">r</span><span class="o">-</span><span class="n">base</span><span class="o">-</span><span class="n">dev</span> <span class="o">-</span><span class="n">y</span> 
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker build --tag testr1 src
</pre></div>
</div>
<p>Wait! That didn’t seem to work! Let’s focus on the last two lines of the error message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Do you want to continue? [Y/n] Abort.
The command &#39;/bin/sh -c apt-get install r-base r-base-dev&#39; returned a non-zero code: 1
</pre></div>
</div>
<p>Ohhhh, right! As we were interactively installing this, we were prompted to press “Y” on our keyboard to continue the installation. We need to include this in our Dockerfile so that we don’t get this error. To do this we append the <code class="docutils literal notranslate"><span class="pre">-y</span></code> flag to the end of the line contianing <code class="docutils literal notranslate"><span class="pre">RUN</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">r-base</span> <span class="pre">r-base-dev</span></code>. Let’s try building again!</p>
<p>Great! Success! Now we can play with installing R packages!</p>
<p>Let’s start now with the test image we have built from our <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run -it --rm testr1
</pre></div>
</div>
<p>Now while we are in the container interactively, we can try to install the R package via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="o">@</span><span class="mi">51</span><span class="n">f56d653892</span><span class="p">:</span><span class="o">/</span><span class="c1"># Rscript -e &quot;install.packages(&#39;cowsay&#39;)&quot;</span>
</pre></div>
</div>
<p>And it looks like it worked! Let’s confirm by trying to call a function from the <code class="docutils literal notranslate"><span class="pre">cowsay</span></code> package in R:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="o">@</span><span class="mi">51</span><span class="n">f56d653892</span><span class="p">:</span><span class="o">/</span><span class="c1"># R</span>

<span class="o">&gt;</span> <span class="n">cowsay</span><span class="p">::</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;Smart for using Docker are you&quot;</span><span class="p">,</span> <span class="s2">&quot;yoda&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Great, let’s exit the container, and add this command to our <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> and try to build it again!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="o">@</span><span class="mi">51</span><span class="n">f56d653892</span><span class="p">:</span><span class="o">/</span><span class="c1"># exit</span>
</pre></div>
</div>
<p>Our <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> now:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FROM</span> <span class="n">debian</span><span class="p">:</span><span class="n">stable</span>

<span class="n">RUN</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>

<span class="n">RUN</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">r</span><span class="o">-</span><span class="n">base</span> <span class="n">r</span><span class="o">-</span><span class="n">base</span><span class="o">-</span><span class="n">dev</span> <span class="o">-</span><span class="n">y</span> 

<span class="n">RUN</span> <span class="n">Rscript</span> <span class="o">-</span><span class="n">e</span> <span class="s2">&quot;install.packages(&#39;cowsay&#39;)&quot;</span>
</pre></div>
</div>
<p>Build the <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> into an image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker build --tag testr1 src

$ docker run -it --rm testr1
</pre></div>
</div>
<p>Looks like a success, let’s be sure we can use the <code class="docutils literal notranslate"><span class="pre">cowsay</span></code> package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="o">@</span><span class="mi">861487</span><span class="n">da5d00</span><span class="p">:</span><span class="o">/</span><span class="c1"># R</span>

<span class="o">&gt;</span> <span class="n">cowsay</span><span class="p">::</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;why did the chicken cross the road&quot;</span><span class="p">,</span> <span class="s2">&quot;chicken&quot;</span><span class="p">)</span>

</pre></div>
</div>
<p>Hurray! We did it! Now we can automate this build on Docker Hub and share this Docker image with the world!</p>
<img src="https://media.giphy.com/media/ZcKASxMYMKA9SQnhIl/giphy-downsized.gif">
Source: https://giphy.com/gifs/memecandy-ZcKASxMYMKA9SQnhIl</div>
<div class="section" id="dockerfile-command-summary">
<h2>Dockerfile command summary<a class="headerlink" href="#dockerfile-command-summary" title="Permalink to this headline">¶</a></h2>
<div class="section" id="most-common-ones-you-will-use">
<h3>Most common ones you will use<a class="headerlink" href="#most-common-ones-you-will-use" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FROM</p></td>
<td><p>States which base image the new Docker image should be built on top of</p></td>
</tr>
<tr class="row-odd"><td><p>RUN</p></td>
<td><p>Specifies that a command should be run in a shell</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="others-you-may-see-and-have-to-encounter">
<h3>Others you may see and have to encounter<a class="headerlink" href="#others-you-may-see-and-have-to-encounter" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ENV</p></td>
<td><p>Sets environment variables</p></td>
</tr>
<tr class="row-odd"><td><p>EXPOSE</p></td>
<td><p>Specifies the port the container should listen to at runtime</p></td>
</tr>
<tr class="row-even"><td><p>COPY or ADD</p></td>
<td><p>adds files (or URL’s in the case of ADD) to a container’s filesystem</p></td>
</tr>
<tr class="row-odd"><td><p>CMD</p></td>
<td><p>Specifies a command to run (this provides the default for executing a container)</p></td>
</tr>
</tbody>
</table>
<p>And more here in the <a class="reference external" href="https://docs.docker.com/engine/reference/builder/">Dockerfile reference</a>.</p>
</div>
</div>
<div class="section" id="choosing-a-base-image-for-your-dockerfile">
<h2>Choosing a base image for your Dockerfile<a class="headerlink" href="#choosing-a-base-image-for-your-dockerfile" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="https://themuslimtimesdotinfodotcom.files.wordpress.com/2018/10/newton-quotes-2.jpg?w=1334"><img alt="https://themuslimtimesdotinfodotcom.files.wordpress.com/2018/10/newton-quotes-2.jpg?w=1334" src="https://themuslimtimesdotinfodotcom.files.wordpress.com/2018/10/newton-quotes-2.jpg?w=1334" style="width: 700px;" /></a>
<p>Source: https://themuslimtimes.info/2018/10/25/if-i-have-seen-further-it-is-by-standing-on-the-shoulders-of-giants/</p>
</div>
<div class="section" id="good-base-images-to-work-from-for-r-or-python-projects">
<h2>Good base images to work from for R or Python projects!<a class="headerlink" href="#good-base-images-to-work-from-for-r-or-python-projects" title="Permalink to this headline">¶</a></h2>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Image</p></th>
<th class="head"><p>Software installed</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://hub.docker.com/r/rocker/tidyverse/">rocker/tidyverse</a></p></td>
<td><p>R, R packages (including the tidyverse), RStudio, make</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://hub.docker.com/r/continuumio/anaconda3/">continuumio/anaconda3</a></p></td>
<td><p>Python 3.7.4, Ananconda base package distribution, Jupyter notebook</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://hub.docker.com/r/jupyter/scipy-notebook">jupyter/scipy-notebook</a></p></td>
<td><p>Includes popular packages from the scientific Python ecosystem.</p></td>
</tr>
</tbody>
</table>
<p>For mixed language projects, I would recommend using the <code class="docutils literal notranslate"><span class="pre">rocker/tidyverse</span></code> image as the base and then installing Anaconda or miniconda as I have done here: https://github.com/UBC-DSCI/introduction-to-datascience/blob/b0f86fc4d6172cd043a0eb831b5d5a8743f29c81/Dockerfile#L19</p>
<p>This is also a nice tour de Docker images from the Jupyter core team: https://jupyter-docker-stacks.readthedocs.io/en/latest/using/selecting.html#selecting-an-image</p>
</div>
<div class="section" id="dockerfile-faq">
<h2>Dockerfile FAQ:<a class="headerlink" href="#dockerfile-faq" title="Permalink to this headline">¶</a></h2>
<div class="section" id="where-does-the-dockerfile-live">
<h3>Where does the Dockerfile live?<a class="headerlink" href="#where-does-the-dockerfile-live" title="Permalink to this headline">¶</a></h3>
<p>The Dockerfile should live in the root directory of your project.</p>
</div>
<div class="section" id="how-do-i-make-a-docker-image-from-a-dockerfile">
<h3>How do I make a Docker image from a Dockerfile?<a class="headerlink" href="#how-do-i-make-a-docker-image-from-a-dockerfile" title="Permalink to this headline">¶</a></h3>
<p>There are 2 ways to do this! I use the first when developing my Dockerfile (to test quickly that it works), and then the second I use when I think I am “done” and want to have it archived on <a class="reference external" href="https://hub.docker.com/">Docker Hub</a>.</p>
<ol class="simple">
<li><p>Build a Docker image locally on your laptop</p></li>
<li><p>Build a Docker image using trusted <a class="reference external" href="https://docs.docker.com/docker-cloud/builds/automated-build/">Automated builds</a> on GitHub Actions</p></li>
</ol>
</div>
<div class="section" id="how-do-i-build-a-docker-image-locally-on-my-laptop">
<h3>How do I build a Docker image locally on my laptop<a class="headerlink" href="#how-do-i-build-a-docker-image-locally-on-my-laptop" title="Permalink to this headline">¶</a></h3>
<p>From the directory that contains your Dockerfile (usually your project root):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">build</span> <span class="o">--</span><span class="n">tag</span> <span class="n">IMAGE_NAME</span><span class="p">:</span><span class="n">VERSION</span> <span class="o">.</span>
</pre></div>
</div>
<p><em>note: <code class="docutils literal notranslate"><span class="pre">--tag</span></code> let’s you name and version the Docker image. You can call this anything you want. The version number/name comes after the colon</em></p>
<p>After I build, I think try to <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">...</span></code> to test the image locally. If I don’t like it, or it doesn’t work, I delete the image with <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">rmi</span> <span class="pre">{IMAGE_NAME}</span></code>, edit my Dockerfile and try to build and run it again.</p>
</div>
<div class="section" id="how-do-i-know-what-commands-to-use-to-install-things-on-linux">
<h3>How do I know what commands to use to install things on Linux?<a class="headerlink" href="#how-do-i-know-what-commands-to-use-to-install-things-on-linux" title="Permalink to this headline">¶</a></h3>
<ol class="simple">
<li><p>Look at the MDS Linux install instructions: <a class="reference external" href="https://ubc-mds.github.io/resources_pages/install_ds_stack_ubuntu/">https://ubc-mds.github.io/resources_pages/install_ds_stack_ubuntu/</a></p></li>
<li><p>Look at other Dockerfiles</p></li>
</ol>
</div>
</div>
<div class="section" id="what-s-next">
<h2>What’s next?<a class="headerlink" href="#what-s-next" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>best practices for package and container versioning</p></li>
<li><p>running scripts (including Makefiles) non-interactively via the command line</p></li>
<li><p>reproducibility &amp; data analysis project wrap-up</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./materials/lectures"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Tiffany Timbers<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>