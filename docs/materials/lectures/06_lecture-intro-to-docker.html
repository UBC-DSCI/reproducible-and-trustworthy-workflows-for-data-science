
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lecture 6 - Introduction to Docker &#8212; DSCI 310 Reproducibke and Trustworthy Workflows for Data Science</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/dsci-310-logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">DSCI 310 Reproducibke and Trustworthy Workflows for Data Science</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../README.html">
   Reproducible and Trustworthy Workflows for Data Science
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Course notes
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="01_lecture-intro-to-ds-workflows.html">
   How do reproducible and trustworthy workflows impact data analysis?
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/materials/lectures/06_lecture-intro-to-docker.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/UBC-DSCI/reproducible-and-trustworthy-workflows-for-data-science"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/UBC-DSCI/reproducible-and-trustworthy-workflows-for-data-science/issues/new?title=Issue%20on%20page%20%2Fmaterials/lectures/06_lecture-intro-to-docker.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/UBC-DSCI/reproducible-and-trustworthy-workflows-for-data-science/master?urlpath=tree/materials/lectures/06_lecture-intro-to-docker.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#learning-objectives">
   Learning Objectives
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#documenting-and-loading-dependencies">
   Documenting and loading dependencies
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-is-docker">
   What is Docker?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#container-versus-virtual-machines">
   Container versus Virtual Machines
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#motivating-example-a-dependency-graph-for-a-data-analysis-project">
   Motivating example - a dependency graph for a data analysis project
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#let-s-do-it">
     Let’s do it!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-0-install-docker-do-this-once">
     Step 0 - Install Docker (do this once)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-1-launch-the-docker-app-for-osx-windows-only">
     Step 1 - launch the Docker app (for OSX &amp; Windows only)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-2-get-makefile2graph-image-from-dockerhub">
     Step 2 - get makefile2graph image from Dockerhub
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#wait-where-did-this-come-from-docker-hub">
     Wait! Where did this come from? Docker Hub!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-3-launch-a-container-from-the-image-and-poke-around">
     Step 3 - launch a container from the image and poke around!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-4-clean-up-your-container">
     Step 4 - clean up your container!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#that-s-a-lot-of-work">
     That’s a lot of work…
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#image-vs-container">
     Image vs container?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-5-connect-the-container-to-your-hard-drive">
     Step 5 - connect the container to your hard drive
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#windows-notes-for-mounting-volumes">
     Windows notes for mounting volumes:
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#step-6-use-the-makefile2graph-program-to-create-the-dependency-graph-this-will-be-required-for-milestone-4">
       Step 6 - use the makefile2graph program to create the dependency graph (this will be required for milestone 4
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#debrief-what-did-we-just-do">
       Debrief - what did we just do?
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#where-to-next">
   Where to next?
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="lecture-6-introduction-to-docker">
<h1>Lecture 6 - Introduction to Docker<a class="headerlink" href="#lecture-6-introduction-to-docker" title="Permalink to this headline">¶</a></h1>
<div class="section" id="learning-objectives">
<h2>Learning Objectives<a class="headerlink" href="#learning-objectives" title="Permalink to this headline">¶</a></h2>
<p>By the end of the lecture, students should be able to:</p>
<ul class="simple">
<li><p>Explain the difference between running software/scripts in a virtual machine vs. a container</p></li>
<li><p>Use a Docker image to run some software</p></li>
</ul>
</div>
<div class="section" id="documenting-and-loading-dependencies">
<h2>Documenting and loading dependencies<a class="headerlink" href="#documenting-and-loading-dependencies" title="Permalink to this headline">¶</a></h2>
<p>You’ve made some beautiful data analysis pipeline/project using make, R, and/or Python. It runs on your machine, but how easily can you, or someone else, get it working on theirs? The answer usually is, it depends…</p>
<p>What does it depend on?</p>
<ul class="simple">
<li><p>Does your README and your scripts make it blatantly obvious what programs and packages need to run your data analysis pipeline/project?</p></li>
</ul>
<ul class="simple">
<li><p>Do you also document the version numbers of the programs and packages you used? This can have big consequences when it comes to replicability… (Remember the <a class="reference external" href="https://blog.revolutionanalytics.com/2019/05/whats-new-in-r-360.html">change to random number generation</a> in R?)</p></li>
</ul>
</div>
<div class="section" id="what-is-docker">
<h2>What is Docker?<a class="headerlink" href="#what-is-docker" title="Permalink to this headline">¶</a></h2>
<p>“<em>Docker containers wrap a piece of software in a complete filesystem that contains everything needed to run: code, runtime, system tools, system libraries – anything that can be installed on a server. This guarantees that the software will always run the same, regardless of its environment.</em>”</p>
<p><em>Source: https://www.docker.com/what-docker</em></p>
</div>
<div class="section" id="container-versus-virtual-machines">
<h2>Container versus Virtual Machines<a class="headerlink" href="#container-versus-virtual-machines" title="Permalink to this headline">¶</a></h2>
<p><img alt="alt tag" src="../../_images/container_v_vm.png" />
<em>Source: https://www.docker.com/resources/what-container</em></p>
<p><em>Key take home - Docker shares the host’s operating system, whereas virtual machines have a completely separate, additional operating system. This can make Docker lighter (smaller in terms of size) and more resource and time-efficient than using a virtual machine.</em></p>
</div>
<div class="section" id="motivating-example-a-dependency-graph-for-a-data-analysis-project">
<h2>Motivating example - a dependency graph for a data analysis project<a class="headerlink" href="#motivating-example-a-dependency-graph-for-a-data-analysis-project" title="Permalink to this headline">¶</a></h2>
<p>We can use the tool <a class="reference external" href="https://github.com/lindenb/makefile2graph">makefile2graph</a> to make a dependency diagram for our data analysis projects from our <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>’s.</p>
<p><strong>Problem</strong> - <a class="reference external" href="https://github.com/lindenb/makefile2graph">makefile2graph</a> is a pain to install (especially on Windows…)</p>
<p><strong>Solution</strong> - let’s use the docker container I built previously to run this!</p>
<div class="section" id="let-s-do-it">
<h3>Let’s do it!<a class="headerlink" href="#let-s-do-it" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="step-0-install-docker-do-this-once">
<h3>Step 0 - Install Docker (do this once)<a class="headerlink" href="#step-0-install-docker-do-this-once" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Follow the <a class="reference external" href="https://ubc-mds.github.io/resources_pages/installation_instructions/">instructions in the MDS installation guide</a> to do this.</p></li>
</ul>
</div>
<div class="section" id="step-1-launch-the-docker-app-for-osx-windows-only">
<h3>Step 1 - launch the Docker app (for OSX &amp; Windows only)<a class="headerlink" href="#step-1-launch-the-docker-app-for-osx-windows-only" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Use launchpad/Finder/Start menu/etc to find and launch Docker</p></li>
</ul>
</div>
<div class="section" id="step-2-get-makefile2graph-image-from-dockerhub">
<h3>Step 2 - get makefile2graph image from Dockerhub<a class="headerlink" href="#step-2-get-makefile2graph-image-from-dockerhub" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>open command line (terminal/GitBash)</p></li>
<li><p>type: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">pull</span> <span class="pre">ttimbers/makefile2graph</span></code></p></li>
<li><p>verify that it successfully pulled by typing: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">images</span></code>, you should see something like:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REPOSITORY</span>                <span class="n">TAG</span>                 <span class="n">IMAGE</span> <span class="n">ID</span>            <span class="n">CREATED</span>             <span class="n">SIZE</span>
<span class="n">ttimbers</span><span class="o">/</span><span class="n">makefile2graph</span>   <span class="n">latest</span>              <span class="mi">823</span><span class="n">dcba8f792</span>        <span class="mi">13</span> <span class="n">months</span> <span class="n">ago</span>       <span class="mi">469</span><span class="n">MB</span>
</pre></div>
</div>
</div>
<div class="section" id="wait-where-did-this-come-from-docker-hub">
<h3>Wait! Where did this come from? <a class="reference external" href="https://hub.docker.com/">Docker Hub</a>!<a class="headerlink" href="#wait-where-did-this-come-from-docker-hub" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://hub.docker.com/">Docker Hub</a> is like GitHub but just for Docker images.</p></li>
<li><p>So what you downloaded was a Docker image that lives in this repository: https://hub.docker.com/r/ttimbers/makefile2graph/</p></li>
</ul>
</div>
<div class="section" id="step-3-launch-a-container-from-the-image-and-poke-around">
<h3>Step 3 - launch a container from the image and poke around!<a class="headerlink" href="#step-3-launch-a-container-from-the-image-and-poke-around" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>type: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">-it</span> <span class="pre">ttimbers/makefile2graph</span></code></p></li>
<li><p>If it worked, then your command line prompt should now look something like this:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ad0560c5b81a</span><span class="p">:</span><span class="o">/</span><span class="c1"># </span>
</pre></div>
</div>
<ul class="simple">
<li><p>use <code class="docutils literal notranslate"><span class="pre">ls</span></code>, <code class="docutils literal notranslate"><span class="pre">cd</span></code>, <code class="docutils literal notranslate"><span class="pre">pwd</span></code> and explore the container</p></li>
<li><p>type <code class="docutils literal notranslate"><span class="pre">exit</span></code> to leave when you are done (your prompt will look normal again)!</p></li>
</ul>
</div>
<div class="section" id="step-4-clean-up-your-container">
<h3>Step 4 - clean up your container!<a class="headerlink" href="#step-4-clean-up-your-container" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>After you close a container it still “hangs” around…</p></li>
<li><p>View any existing containers using <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span> <span class="pre">-a</span></code></p></li>
<li><p>Kill the container by typing <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">rm</span> <span class="pre">&lt;container_id&gt;</span></code></p></li>
<li><p>Prove to yourself that the container is no longer “hanging around” via <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span> <span class="pre">-a</span></code>, but that you still have the image installed (via <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">images</span></code>)</p></li>
</ul>
</div>
<div class="section" id="that-s-a-lot-of-work">
<h3>That’s a lot of work…<a class="headerlink" href="#that-s-a-lot-of-work" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>We can tell Docker to delete the container upon exit using the <code class="docutils literal notranslate"><span class="pre">--rm</span></code> flag in the run command.</p></li>
<li><p>Type the command below to run the container again, exit it and prove to yourself that the container was deleted (but not the image!):</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">it</span> <span class="o">--</span><span class="n">rm</span> <span class="n">ttimbers</span><span class="o">/</span><span class="n">makefile2graph</span>
</pre></div>
</div>
</div>
<div class="section" id="image-vs-container">
<h3>Image vs container?<a class="headerlink" href="#image-vs-container" title="Permalink to this headline">¶</a></h3>
<p>Analogy: The program Chrome is like a Docker image, whereas a Chrome window is like a Docker container.</p>
<a class="reference internal image-reference" href="../../_images/instance_analogy.png"><img alt="../../_images/instance_analogy.png" class="align-left" src="../../_images/instance_analogy.png" style="width: 600px;" /></a>
<p>Here is another schematic from a <a class="reference external" href="https://blog.octo.com/en/docker-registry-first-steps/">blog post</a> by Arnaud Mazin:</p>
<p><img alt="Containers_vs_images" src="../../_images/docker-stages.png" />
<em>Source: <a class="reference external" href="https://blog.octo.com/en/docker-registry-first-steps/">OctoTalks</a></em></p>
</div>
<div class="section" id="step-5-connect-the-container-to-your-hard-drive">
<h3>Step 5 - connect the container to your hard drive<a class="headerlink" href="#step-5-connect-the-container-to-your-hard-drive" title="Permalink to this headline">¶</a></h3>
<p>To run the <code class="docutils literal notranslate"><span class="pre">makefile2graph</span></code> program on a file that exists on our laptop we will need to mount at least part of our filesystem as a volume on the Docker container. We do that with <code class="docutils literal notranslate"><span class="pre">-v</span> <span class="pre">&lt;absolute</span> <span class="pre">path</span> <span class="pre">on</span> <span class="pre">laptop&gt;:&lt;relative</span> <span class="pre">path</span> <span class="pre">from</span> <span class="pre">container</span> <span class="pre">home</span> <span class="pre">directory&gt;</span></code>.</p>
<p>To mount <code class="docutils literal notranslate"><span class="pre">data_analysis_pipeline_eg-3-3.0</span></code>:</p>
<ol class="simple">
<li><p>Download <a class="reference external" href="https://github.com/ttimbers/data_analysis_pipeline_eg/archive/v3.0.zip">this version</a> of the <code class="docutils literal notranslate"><span class="pre">data_analysis_pipeline_eg</span></code> repository.</p></li>
<li><p>Unzip it and navigate to the root of the project directory.</p></li>
<li><p>Get your current working directory (e.g., using <code class="docutils literal notranslate"><span class="pre">pwd</span></code>).</p></li>
<li><p>Type the following (filling in the absolute path for your laptop):</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">it</span> <span class="o">--</span><span class="n">rm</span> <span class="o">-</span><span class="n">v</span> <span class="o">&lt;</span><span class="n">local_version</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">container_folder</span><span class="o">&gt;</span> <span class="n">ttimbers</span><span class="o">/</span><span class="n">makefile2graph</span>
</pre></div>
</div>
<ol class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">ls</span></code>, <code class="docutils literal notranslate"><span class="pre">cd</span></code>, <code class="docutils literal notranslate"><span class="pre">pwd</span></code> and explore the container now, can you see the files on your laptop? Specifically the Makefile?</p></li>
</ol>
</div>
<div class="section" id="windows-notes-for-mounting-volumes">
<h3>Windows notes for mounting volumes:<a class="headerlink" href="#windows-notes-for-mounting-volumes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Windows machines need to explicitly share drives with Docker</p></li>
<li><p>On Windows, the laptop path depends what shell you are using, here are some details:</p>
<ul>
<li><p>If you are going to run it in Git Bash, then the command should be: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">--rm</span> <span class="pre">-it</span> <span class="pre">-v</span> <span class="pre">/$(pwd):&lt;PATH_ON_CONTAINER&gt;</span> <span class="pre">&lt;IMAGE_NAME&gt;</span></code> to share the current directory.</p></li>
<li><p>If you are going to run it in Power Shell, then the command should be: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">--rm</span> <span class="pre">-it</span> <span class="pre">-v</span> <span class="pre">&lt;ABSOLUTE_PATH_TO_CONTAINER&gt;:&lt;PATH_ON_CONTAINER&gt;</span> <span class="pre">&lt;IMAGE_NAME&gt;</span></code> (<code class="docutils literal notranslate"><span class="pre">pwd</span></code> and variants do not seem to work). And the path must be formatted like: <code class="docutils literal notranslate"><span class="pre">C:\Users\tiffany.timbers\Documents\project\:/home/project</span></code></p></li>
</ul>
</li>
</ul>
<div class="section" id="step-6-use-the-makefile2graph-program-to-create-the-dependency-graph-this-will-be-required-for-milestone-4">
<h4>Step 6 - use the makefile2graph program to create the dependency graph (this will be required for milestone 4<a class="headerlink" href="#step-6-use-the-makefile2graph-program-to-create-the-dependency-graph-this-will-be-required-for-milestone-4" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Inside the container, navigate into <code class="docutils literal notranslate"><span class="pre">data_analysis_pipeline_eg</span></code></p></li>
<li><p>Type the following to create a <code class="docutils literal notranslate"><span class="pre">.png</span></code> that illustrates the dependencies of your <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">makefile2graph</span> <span class="o">&gt;</span> <span class="n">Makefile</span><span class="o">.</span><span class="n">dot</span>
<span class="n">dot</span> <span class="o">-</span><span class="n">Tpng</span> <span class="n">Makefile</span><span class="o">.</span><span class="n">dot</span> <span class="o">-</span><span class="n">o</span> <span class="n">Makefile</span><span class="o">.</span><span class="n">png</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Exit from the container (via <code class="docutils literal notranslate"><span class="pre">exit</span></code>)</p></li>
<li><p>Use your laptop (not the container) to open <code class="docutils literal notranslate"><span class="pre">Makefile.png</span></code> to view the dependency diagram</p></li>
</ul>
<p><em>note - the above commands for step 6 are not Docker commands, they are commands for the <code class="docutils literal notranslate"><span class="pre">makefile2graph</span></code> program. Read the docs for that Software here: https://github.com/lindenb/makefile2graph</em></p>
</div>
<div class="section" id="debrief-what-did-we-just-do">
<h4>Debrief - what did we just do?<a class="headerlink" href="#debrief-what-did-we-just-do" title="Permalink to this headline">¶</a></h4>
<p>Let’s now dig deeper into the commands and tools we just used to become more familiar with Docker! Let’s fill in this table to explain what each part of our Docker commands did:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>command/flag</p></th>
<th class="head"><p>What it does</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pull</span></code></p></td>
<td><p>Downloads a Docker image from Docker Hub</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">images</span></code></p></td>
<td><p>Tells you what images are installed on your machine</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">run</span></code></p></td>
<td><p>Launches a Docker container from an image</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-it</span></code></p></td>
<td><p>Tells Docker to run the container interactively</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--rm</span></code></p></td>
<td><p>Makes a container ephemeral (deletes it upon exit)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-v</span></code></p></td>
<td><p>Mounts a volume of your laptop to the Docker container</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exit</span></code></p></td>
<td><p>Exits a Docker container</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="where-to-next">
<h2>Where to next?<a class="headerlink" href="#where-to-next" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Installing things in linux (most containers used in Data Science are linux based)</p></li>
<li><p>Creating your own Docker image!</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./materials/lectures"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Tiffany Timbers<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>